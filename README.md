# S44EXP.X
ADPCM/PCM/WAV player for X680x0/Human68k

以下の形式のファイルを再生するプレーヤーです。ファイルの種別は拡張子で判断します。

 - X68k(MSM6258V) ADPCM 15.6kHz mono (.PCM)
 - 16bit符号付き big endian raw PCM (.S32/.S44/.S48/.M32/.M44/.M48)
 - 16bit符号付き WAV (.WAV)
 - 4bit符号付き YM2608 ADPCM (.A32/.A44/.A48/.N32/.N44/.N48)

以下のような特徴があります。

- インダイレクトファイルによるプレイリスト再生に対応しています。
- KMD歌詞データの表示に対応しています。
- KMD歌詞データエディタKMDEDのタグ情報・アルバムアート表示に対応しています。

<img src='images/s44exp1.png' width='800'/>

出力デバイスはX68k内蔵ADPCMまたはMercury-Unitになります。組み込むPCM8ドライバによって決まります。

- PCM8A.X(出力先は内蔵ADPCM) ... すべての形式がリアルタイムに内蔵ADPCMの音声に変換されて出力されます。
- PCM8PP.X(出力先はMercury-Unit) ... 内蔵ADPCM形式も含めたすべての形式の音声がMercury-Unitから出力されます。

---

### インストール方法

S4EXPxxx.ZIP をダウンロードして展開し、S44EXP.X をパスの通ったディレクトリに置きます。

---

### 使用方法

- 内蔵ADPCMで鳴らす場合

pcm8a.x を常駐させて、

    s44exp <PCMファイル名>


- Mercury-UNITで鳴らす場合

pcm8pp.x を常駐させて、

    s44exp <PCMファイル名>


- KMD歌詞表示を行う場合

pcm8a.x または pcm8pp.x を常駐させて、
全画面、アートワーク輝度70% なら

    s44exp -x -t70 <PCMファイル名>

060loadhigh.x を使ったハイメモリ上での実行に対応しています。

pcm8a.x 無しでも内蔵ADPCMでの再生は可能ですが、16bitPCMデータでKMD歌詞表示を行う場合は歌詞の遅れが目立つことがあります。

---

### インダイレクトファイル

インダイレクトファイルは、1行に1ファイル名を記述したテキストファイルです。長いコマンドラインで複数のPCMファイル名を与える代わりに利用できます。

    G:\S44\HOGE1.S44
    G:\S44\HOGE2.S44

さらにファイル名に続けてボリューム値も指定可能です。これはコマンドラインで与える `-v<n>` と同じ意味になりますが、インダイレクトファイルの場合は曲ごとに細かく指定することができます。

    H:\A44\FUGA1.A44,v8
    H:\A44\FUGA2.A44,v7

なお、あまり大きいボリューム値を指定するとオーバーフローして音割れの原因になりますので気をつけてください。

インダイレクトファイルを使ったプレイリスト再生を行うには`-i`オプションを使います。

    s44exp -x -t70 -i <インダイレクトファイル名>

`-s` をつけるとシャッフルモードになります。

    s44exp -x -t70 -i <インダイレクトファイル名> -s

また、インダイレクトファイルやコマンドラインから複数のファイルを指定している場合は、カーソルキーの RIGHT で次の曲に移動できます。

---

### History

* 1.2.1 (2023/04/22) ... シャッフルモードに対応した
* 1.2.0 (2023/04/22) ... インダイレクトファイルに対応した
* 1.1.2 (2023/04/14) ... PCM8PP.X のバージョンチェックを少し緩和
* 1.1.1 (2023/04/11) ... PCM8A.X 無しだと X68000Z EAK 1.1.3 で正常に再生できない症状への対策を行なった
* 1.1.0 (2023/04/01) ... 初版
